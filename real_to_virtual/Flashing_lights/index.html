<!-- ========================== index.html ========================== -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Combo Lock</title>
  <style>
  :root{
    --bg:#0b1020; --card:#121a33; --muted:#9fb3ff; --text:#eaf0ff; --accent:#76e0a2; --warn:#ffd166;
  }
  @media (prefers-color-scheme: light){
    :root{ --bg:#f4f6ff; --card:#ffffff; --text:#0d1533; --muted:#5060a0; }
  }

  *{ box-sizing:border-box }

  html{ font-size:90px; } /* 1rem = 90px */
  html,body{ height:100% }

  body{
    margin:0;
    height:100vh;
    width:100vw;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:0.45rem;
    color:var(--text);
    font-family:system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    background:
      radial-gradient(1200px 600px at 20% -10%, #15224d 0%, transparent 60%),
      var(--bg);
  }

  .wrap{
    width:min(10.5rem, 92vw); /* ~945px max */
    background:color-mix(in oklab, var(--card) 90%, transparent);
    border:0.02rem solid color-mix(in oklab, var(--text) 15%, transparent);
    border-radius:0.32rem;
    padding:0.45rem;
    box-shadow:0 0.55rem 1.25rem rgba(0,0,0,.35);
  }

  h1{
    margin:0 0 0.12rem 0;
    font-size:0.52rem; /* ~47px */
    letter-spacing:0.01rem;
  }

  p{
    margin:0 0 0.35rem 0;
    color:var(--muted);
    font-size:0.30rem; /* ~27px */
    line-height:1.25;
  }

  .lock{
    display:grid;
    grid-template-columns:repeat(3, 1fr);
    gap:0.22rem;
    padding:0.28rem;
    border-radius:0.28rem;
    background:rgba(255,255,255,.03);
    border:0.02rem solid color-mix(in oklab, var(--text) 10%, transparent);
  }

  .dial{
    display:grid;
    grid-template-rows:auto 1fr auto;
    gap:0.18rem;
    align-items:center;
    justify-items:center;
    padding:0.22rem;
    border-radius:0.24rem;
    border:0.02rem solid color-mix(in oklab, var(--text) 12%, transparent);
    background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
  }

  /* Arrow buttons: smaller + consistent height */
  .dial button{
    width:100%;
    padding:0.16rem 0.12rem;
    border-radius:0.18rem;
    border:0.02rem solid color-mix(in oklab, var(--text) 12%, transparent);
    background:rgba(255,255,255,.05);
    color:inherit;
    cursor:pointer;
    font:0.28rem/1 ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; /* ~25px */
    min-height:0.62rem; /* ~56px */
  }
  .dial button:hover{ filter:brightness(1.08) }
  .dial button:active{ transform:translateY(0.02rem) }

  /* Number window: dominant but not huge */
  .num{
    width:100%;
    height:1.05rem; /* ~95px */
    border-radius:0.20rem;
    display:grid;
    place-items:center;
    background:rgba(0,0,0,.28);
    border:0.02rem solid #2a3b77;
    box-shadow:inset 0 0.10rem 0.24rem rgba(0,0,0,.35);
    font:0.78rem/1 ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; /* ~70px */
  }

  .dial[data-index="0"] .num span { color:#ff4d4d; } /* red */
  .dial[data-index="1"] .num span { color:#4d8aff; } /* blue */
  .dial[data-index="2"] .num span { color:#00d26a; } /* green */

  .actions{
    display:flex;
    gap:0.25rem;
    margin-top:0.35rem;
    flex-wrap:wrap;
  }

  .btn{
    padding:0.22rem 0.34rem;
    border-radius:0.20rem;
    border:0.02rem solid #2a3b77;
    background:#0f1a3c;
    color:var(--text);
    cursor:pointer;
    font-size:0.30rem; /* ~27px */
    font-weight:650;
    min-height:0.75rem; /* ~67px */
  }
  .btn.secondary{ background:#0d2238 }
  .btn:hover{ filter:brightness(1.06) }

  .status{
    margin-top:0.28rem;
    font-weight:700;
    font-size:0.30rem;
    min-height:0.45rem;
  }
  .ok{ color:var(--accent) }

  audio{ display:none }

  /* If space gets tight, stack dials */
  @media (max-width: 650px){
    .lock{ grid-template-columns:1fr; }
  }
</style>
</head>
<body>
  <main class="wrap">
    <header>
      <h1>ðŸ”’ Combo Lock</h1>
      <p>Find the 3-number combo to reveal a secret</p>
    </header>

    <section class="lock" aria-label="Combo lock" role="group">
      <div class="dial" data-index="0">
        <button class="up" aria-label="Increase first number">â–²</button>
        <div class="num" aria-live="polite" aria-atomic="true"><span>0</span></div>
        <button class="down" aria-label="Decrease first number">â–¼</button>
      </div>
      <div class="dial" data-index="1">
        <button class="up" aria-label="Increase second number">â–²</button>
        <div class="num" aria-live="polite" aria-atomic="true"><span>0</span></div>
        <button class="down" aria-label="Decrease second number">â–¼</button>
      </div>
      <div class="dial" data-index="2">
        <button class="up" aria-label="Increase third number">â–²</button>
        <div class="num" aria-live="polite" aria-atomic="true"><span>0</span></div>
        <button class="down" aria-label="Decrease third number">â–¼</button>
      </div>
    </section>

    <div class="actions">
      <button id="check" class="btn">âœ… Check</button>
      <button id="reset" class="btn secondary">â†º Reset</button>
    </div>

    <div id="status" class="status" role="status" aria-live="polite"></div>

    <!-- Audio files -->
    <audio id="sound-correct" src="correct.mp3"></audio>
    <audio id="sound-wrong" src="wrong.mp3"></audio>
  </main>

  <script>
    // ====== CONFIG ======
    const CORRECT = [2,1,0];       // <â€” set your 3-number solution here
    const REVEAL_NUMBER = 26;      // <â€” number to show on output.html once solved
    const REDIRECT_DELAY_MS = 2000; // increased delay to allow full sound play

    // ====== STATE ======
    const dials = Array.from(document.querySelectorAll('.dial'));
    const statusEl = document.getElementById('status');
    const checkBtn = document.getElementById('check');
    const resetBtn = document.getElementById('reset');

    const soundCorrect = document.getElementById('sound-correct');
    const soundWrong = document.getElementById('sound-wrong');

    const getVals = () => dials.map(d => parseInt(d.querySelector('.num span').textContent, 10));
    const setVal = (i, v) => { dials[i].querySelector('.num span').textContent = String(v); };

    function wrapDec(n){ return (n + 9) % 10 } // decreases with wrap-around
    function wrapInc(n){ return (n + 1) % 10 }  // increases with wrap-around

    function paintStatus(msg, cls){
      statusEl.className='status ' + (cls||'');
      statusEl.textContent = msg;
    }

    // init all zeros
    dials.forEach((d,i)=> setVal(i,0));

    // wire buttons
    dials.forEach((dial, i)=>{
      const up = dial.querySelector('.up');
      const down = dial.querySelector('.down');

      up.addEventListener('click', ()=>{
        const curr = parseInt(dial.querySelector('.num span').textContent, 10);
        setVal(i, wrapInc(curr));
      });

      down.addEventListener('click', ()=>{
        const curr = parseInt(dial.querySelector('.num span').textContent, 10);
        setVal(i, wrapDec(curr));
      });
    });

    checkBtn.addEventListener('click', ()=>{
      const vals = getVals();
      const ok = vals.every((v, i)=> v === CORRECT[i]);
      if(ok){
        localStorage.setItem('combo_unlocked','true');
        localStorage.setItem('reveal_number', String(REVEAL_NUMBER));
        paintStatus('Unlocked! Revealing secretâ€¦', 'ok');
        soundCorrect.play();
        setTimeout(()=>{ window.location.href = 'output.html'; }, REDIRECT_DELAY_MS);
      } else {
        paintStatus('Not quiteâ€”try again.', '');
        soundWrong.play();
      }
    });

    resetBtn.addEventListener('click', ()=>{
      dials.forEach((_,i)=> setVal(i,0));
      statusEl.textContent = '';
    });
  </script>
</body>
</html>
