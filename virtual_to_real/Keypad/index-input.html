<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Keycode Puzzle</title>
<style>
  :root { --bg:#0b0f14; --card:#121923; --ink:#e6eef8; --accent:#48b3ff; --bad:#ff5566; }
  html, body { height:100%; margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif; background:linear-gradient(180deg,#0a0e13,#0f1a26 50%,#0a0e13); color:var(--ink); }
  .wrap { min-height:100%; display:grid; place-items:center; padding:24px; }
  .card { width:min(520px,92vw); background:var(--card); border:1px solid rgba(255,255,255,.06);
          border-radius:20px; box-shadow:0 10px 30px rgba(0,0,0,.35); padding:28px 24px 24px; }
  h1 { margin:0 0 6px; font-size:1.4rem; letter-spacing:.2px; }
  p.hint { margin:0 0 18px; color:#b7c6d9; font-size:.95rem; }
  .inputs { display:flex; gap:12px; justify-content:center; margin:22px 0; }
  .digit {
    width:64px; height:72px; text-align:center; font-size:2rem; letter-spacing:.5px;
    border-radius:14px; border:1px solid rgba(255,255,255,.1); background:#0f141b; color:var(--ink);
    outline:none; transition:border-color .15s, transform .15s, box-shadow .15s;
  }
  .digit:focus { border-color:var(--accent); box-shadow:0 0 0 3px rgba(72,179,255,.2); }
  .actions { display:flex; justify-content:center; gap:12px; margin-top:2px; }
  button {
    cursor:pointer; border:0; padding:12px 18px; border-radius:14px; font-weight:600; font-size:1rem;
    background:var(--accent); color:#04121c; transition:transform .08s ease, filter .2s ease;
  }
  button:hover { filter:brightness(1.06); }
  button:active { transform:translateY(1px) scale(.99); }
  .error { text-align:center; color:var(--bad); min-height:22px; margin-top:12px; font-size:.95rem; }
  .shake { animation:shake .35s linear; }
  @keyframes shake {
    10%, 90% { transform:translateX(-1px); }
    20%, 80% { transform:translateX(2px); }
    30%, 50%, 70% { transform:translateX(-4px); }
    40%, 60% { transform:translateX(4px); }
  }
</style>
</head>
<body>
<div class="wrap">
  <div class="card" id="card">
    <h1>Enter the 4-digit keycode</h1>
    <p class="hint">Type the digits or use your keyboard. Then press <b>Check</b>.</p>

    <div class="inputs" id="inputs">
      <input class="digit" inputmode="numeric" pattern="[0-9]*" maxlength="1" aria-label="Digit 1">
      <input class="digit" inputmode="numeric" pattern="[0-9]*" maxlength="1" aria-label="Digit 2">
      <input class="digit" inputmode="numeric" pattern="[0-9]*" maxlength="1" aria-label="Digit 3">
      <input class="digit" inputmode="numeric" pattern="[0-9]*" maxlength="1" aria-label="Digit 4">
    </div>

    <div class="actions">
      <button id="checkBtn" type="button">Check</button>
    </div>

    <div class="error" id="msg" role="status" aria-live="polite"></div>

    <!-- Preload audio (plays on button click so browsers allow it) -->
    <audio id="sndOK" src="correct.mp3" preload="auto"></audio>
    <audio id="sndNo" src="wrong.mp3" preload="auto"></audio>
  </div>
</div>

<script>
  // === Configuration ===
  const SECRET_CODE = "1357";          // ✅ change this to your desired 4-digit code
  const SECRET_PAGE = "secret.html";   // ✅ page to open when correct

  const inputs = Array.from(document.querySelectorAll(".digit"));
  const card = document.getElementById("card");
  const msg = document.getElementById("msg");
  const checkBtn = document.getElementById("checkBtn");
  const sndOK = document.getElementById("sndOK");
  const sndNo = document.getElementById("sndNo");

  // Auto-focus first digit
  inputs[0].focus();

  // Auto-advance and backspace handling
  inputs.forEach((inp, idx) => {
    inp.addEventListener("input", () => {
      inp.value = inp.value.replace(/\D/g, "").slice(0,1); // digits only
      if (inp.value && idx < inputs.length - 1) inputs[idx + 1].focus();
    });

    inp.addEventListener("keydown", (e) => {
      if (e.key === "Backspace" && !inp.value && idx > 0) {
        inputs[idx - 1].focus();
      }
      if (e.key === "Enter") {
        checkCode();
      }
      // Ensure only digits are typed
      if (e.key.length === 1 && !/\d/.test(e.key)) e.preventDefault();
    });
  });

  checkBtn.addEventListener("click", checkCode);

  function getCode() { return inputs.map(i => i.value || "").join(""); }

  function shake() {
    card.classList.remove("shake");
    // force reflow to restart animation
    void card.offsetWidth;
    card.classList.add("shake");
  }

  async function checkCode() {
    const code = getCode();
    msg.textContent = "";
    if (code.length < 4) {
      msg.textContent = "Please enter all 4 digits.";
      shake();
      return;
    }

    if (code === SECRET_CODE) {
      try {
        // Play success sound, then redirect after it finishes (or after 800ms fallback)
        const play = sndOK.play();
        if (play !== undefined) await play.catch(()=>{});
        const go = () => window.location.href = SECRET_PAGE;
        sndOK.onended = go;
        setTimeout(go, 800); // fallback if onended doesn’t fire
      } catch {
        window.location.href = SECRET_PAGE;
      }
    } else {
      msg.textContent = "Wrong code. Try again!";
      try {
        const play = sndNo.play();
        if (play !== undefined) await play.catch(()=>{});
      } catch {}
      shake();
      // Optionally clear inputs on wrong attempt:
      // inputs.forEach(i => i.value = "");
      // inputs[0].focus();
    }
  }
</script>
</body>
</html>
