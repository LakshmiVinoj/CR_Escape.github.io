<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Keycode Puzzle</title>

<style>
  :root { 
    --bg:#0b0f14; 
    --card:#121923; 
    --ink:#e6eef8; 
    --accent:#48b3ff; 
    --bad:#ff5566; 
  }

  html {
    font-size: 90px; /* 1rem = 90px */
  }

  body { 
    margin:0; 
    height:100vh;
    width:100vw;
    display:flex;
    align-items:center;
    justify-content:center;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif; 
    background:linear-gradient(180deg,#0a0e13,#0f1a26 50%,#0a0e13); 
    color:var(--ink); 
  }

  .card { 
    width:min(10rem, 90vw); /* ~900px */
    background:var(--card); 
    border:0.02rem solid rgba(255,255,255,.06);
    border-radius:0.35rem; 
    box-shadow:0 0.6rem 1.6rem rgba(0,0,0,.4); 
    padding:0.8rem; 
    text-align:center;
  }

  h1 { 
    margin:0 0 0.3rem; 
    font-size:0.55rem; /* ~50px */
    letter-spacing:.02rem; 
  }

  .hint { 
    margin:0 0 0.6rem; 
    color:#b7c6d9; 
    font-size:0.35rem; /* ~32px */
  }

  .inputs { 
    display:flex; 
    gap:0.4rem; 
    justify-content:center; 
    margin:0.6rem 0; 
  }

  .digit {
    width:1.5rem;  /* ~135px */
    height:1.6rem;
    text-align:center; 
    font-size:0.9rem; /* ~81px */
    letter-spacing:0.05rem;
    border-radius:0.25rem; 
    border:0.03rem solid rgba(255,255,255,.1); 
    background:#0f141b; 
    color:var(--ink);
    outline:none; 
    transition:border-color .15s, transform .15s, box-shadow .15s;
  }

  .digit:focus { 
    border-color:var(--accent); 
    box-shadow:0 0 0 0.08rem rgba(72,179,255,.25); 
  }

  .actions { 
    display:flex; 
    justify-content:center; 
    margin-top:0.4rem; 
  }

  button {
    cursor:pointer; 
    border:0; 
    padding:0.35rem 0.7rem; 
    border-radius:0.25rem; 
    font-weight:600; 
    font-size:0.4rem; /* ~36px */
    background:var(--accent); 
    color:#04121c; 
    transition:transform .08s ease, filter .2s ease;
  }

  button:hover { 
    filter:brightness(1.06); 
  }

  button:active { 
    transform:translateY(0.02rem) scale(.99); 
  }

  .error { 
    text-align:center; 
    color:var(--bad); 
    min-height:0.5rem; 
    margin-top:0.4rem; 
    font-size:0.32rem; 
  }

  .shake { 
    animation:shake .35s linear; 
  }

  @keyframes shake {
    10%, 90% { transform:translateX(-0.03rem); }
    20%, 80% { transform:translateX(0.06rem); }
    30%, 50%, 70% { transform:translateX(-0.1rem); }
    40%, 60% { transform:translateX(0.1rem); }
  }
</style>
</head>

<body>
  <div class="card" id="card">
    <h1>Enter the 4-digit keycode</h1>
    <p class="hint">Type the digits or use your keyboard. Then press <b>Check</b>.</p>

    <div class="inputs" id="inputs">
      <input class="digit" inputmode="numeric" pattern="[0-9]*" maxlength="1">
      <input class="digit" inputmode="numeric" pattern="[0-9]*" maxlength="1">
      <input class="digit" inputmode="numeric" pattern="[0-9]*" maxlength="1">
      <input class="digit" inputmode="numeric" pattern="[0-9]*" maxlength="1">
    </div>

    <div class="actions">
      <button id="checkBtn" type="button">Check</button>
    </div>

    <div class="error" id="msg"></div>

    <audio id="sndOK" src="correct.mp3" preload="auto"></audio>
    <audio id="sndNo" src="wrong.mp3" preload="auto"></audio>
  </div>

<script>
  const SECRET_CODE = "1357";
  const SECRET_PAGE = "secret.html";

  const inputs = Array.from(document.querySelectorAll(".digit"));
  const card = document.getElementById("card");
  const msg = document.getElementById("msg");
  const checkBtn = document.getElementById("checkBtn");
  const sndOK = document.getElementById("sndOK");
  const sndNo = document.getElementById("sndNo");

  inputs[0].focus();

  inputs.forEach((inp, idx) => {
    inp.addEventListener("input", () => {
      inp.value = inp.value.replace(/\D/g, "").slice(0,1);
      if (inp.value && idx < inputs.length - 1) inputs[idx + 1].focus();
    });

    inp.addEventListener("keydown", (e) => {
      if (e.key === "Backspace" && !inp.value && idx > 0) {
        inputs[idx - 1].focus();
      }
      if (e.key === "Enter") checkCode();
      if (e.key.length === 1 && !/\d/.test(e.key)) e.preventDefault();
    });
  });

  checkBtn.addEventListener("click", checkCode);

  function getCode() { return inputs.map(i => i.value || "").join(""); }

  function shake() {
    card.classList.remove("shake");
    void card.offsetWidth;
    card.classList.add("shake");
  }

  async function checkCode() {
    const code = getCode();
    msg.textContent = "";

    if (code.length < 4) {
      msg.textContent = "Please enter all 4 digits.";
      shake();
      return;
    }

    if (code === SECRET_CODE) {
      try {
        const play = sndOK.play();
        if (play !== undefined) await play.catch(()=>{});
        const go = () => window.location.href = SECRET_PAGE;
        sndOK.onended = go;
        setTimeout(go, 800);
      } catch {
        window.location.href = SECRET_PAGE;
      }
    } else {
      msg.textContent = "Wrong code. Try again!";
      try {
        const play = sndNo.play();
        if (play !== undefined) await play.catch(()=>{});
      } catch {}
      shake();
    }
  }
</script>
</body>
</html>
